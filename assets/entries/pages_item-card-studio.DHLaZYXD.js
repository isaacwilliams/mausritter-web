import{g as me,u as ie,j as i,d as C,m as B,e as ue,r as x,l as he,C as pe,f as ge,S as fe,N as we,i as Ce,a as be,b as ye,o as ve}from"../chunks/chunk-CWwA7P3U.js";import{l as K}from"../chunks/chunk-6EimslaF.js";import{R as xe,C as Se,n as Q}from"../chunks/chunk-Czs3EjMm.js";import{B as Ie,T as je}from"../chunks/chunk-CLNMdr6k.js";import{T as Te}from"../chunks/chunk-JWPTgnT2.js";/* empty css                      */import"../chunks/chunk-Fzw1n6aE.js";var q={exports:{}},ee;function Pe(){return ee||(ee=1,function(n){(function(){function e(a,s){document.addEventListener?a.addEventListener("scroll",s,!1):a.attachEvent("scroll",s)}function o(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function s(){document.removeEventListener("DOMContentLoaded",s),a()}):document.attachEvent("onreadystatechange",function s(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",s),a())})}function t(a){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(a)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function r(a,s){a.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+s+";"}function d(a){var s=a.g.offsetWidth,l=s+100;return a.j.style.width=l+"px",a.i.scrollLeft=l,a.h.scrollLeft=a.h.scrollWidth+100,a.l!==s?(a.l=s,!0):!1}function u(a,s){function l(){var g=b;d(g)&&g.g.parentNode!==null&&s(g.l)}var b=a;e(a.h,l),e(a.i,l),d(a)}function p(a,s,l){s=s||{},l=l||window,this.family=a,this.style=s.style||"normal",this.weight=s.weight||"normal",this.stretch=s.stretch||"normal",this.context=l}var c=null,w=null,m=null,I=null;function f(a){return w===null&&(T(a)&&/Apple/.test(window.navigator.vendor)?(a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),w=!!a&&603>parseInt(a[1],10)):w=!1),w}function T(a){return I===null&&(I=!!a.document.fonts),I}function P(a,s){var l=a.style,b=a.weight;if(m===null){var g=document.createElement("div");try{g.style.font="condensed 100px sans-serif"}catch{}m=g.style.font!==""}return[l,b,m?a.stretch:"","100px",s].join(" ")}p.prototype.load=function(a,s){var l=this,b=a||"BESbswy",g=0,y=s||3e3,_=new Date().getTime();return new Promise(function($,U){if(T(l.context)&&!f(l.context)){var W=new Promise(function(M,E){function D(){new Date().getTime()-_>=y?E(Error(""+y+"ms timeout exceeded")):l.context.document.fonts.load(P(l,'"'+l.family+'"'),b).then(function(A){1<=A.length?M():setTimeout(D,25)},E)}D()}),J=new Promise(function(M,E){g=setTimeout(function(){E(Error(""+y+"ms timeout exceeded"))},y)});Promise.race([J,W]).then(function(){clearTimeout(g),$(l)},U)}else o(function(){function M(){var v;(v=k!=-1&&h!=-1||k!=-1&&S!=-1||h!=-1&&S!=-1)&&((v=k!=h&&k!=S&&h!=S)||(c===null&&(v=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!v&&(536>parseInt(v[1],10)||parseInt(v[1],10)===536&&11>=parseInt(v[2],10))),v=c&&(k==j&&h==j&&S==j||k==z&&h==z&&S==z||k==V&&h==V&&S==V)),v=!v),v&&(N.parentNode!==null&&N.parentNode.removeChild(N),clearTimeout(g),$(l))}function E(){if(new Date().getTime()-_>=y)N.parentNode!==null&&N.parentNode.removeChild(N),U(Error(""+y+"ms timeout exceeded"));else{var v=l.context.document.hidden;(v===!0||v===void 0)&&(k=D.g.offsetWidth,h=A.g.offsetWidth,S=L.g.offsetWidth,M()),g=setTimeout(E,50)}}var D=new t(b),A=new t(b),L=new t(b),k=-1,h=-1,S=-1,j=-1,z=-1,V=-1,N=document.createElement("div");N.dir="ltr",r(D,P(l,"sans-serif")),r(A,P(l,"serif")),r(L,P(l,"monospace")),N.appendChild(D.g),N.appendChild(A.g),N.appendChild(L.g),l.context.document.body.appendChild(N),j=D.g.offsetWidth,z=A.g.offsetWidth,V=L.g.offsetWidth,E(),u(D,function(v){k=v,M()}),r(D,P(l,'"'+l.family+'",sans-serif')),u(A,function(v){h=v,M()}),r(A,P(l,'"'+l.family+'",serif')),u(L,function(v){S=v,M()}),r(L,P(l,'"'+l.family+'",monospace'))})})},n.exports=p})()}(q)),q.exports}var ke=Pe();const G=me(ke),De="/assets/static/item-torch.BxO2iMf6.png",Ne="/assets/static/item-lantern.DmssaJWd.png",_e="/assets/static/item-electric-lantern.B1X7SUUg.png",Ee="/assets/static/item-pips.CxYpo8Zk.png",Ae="/assets/static/item-quiver.DVf5t3Ef.png",ze="/assets/static/item-rations.BUvXbNq7.png",Re="/assets/static/item-stones.DAdDNebo.png",Be="/assets/static/item-improvised.B2mixCIv.png",Ue="/assets/static/item-light-1.W9SxwGYa.png",Me="/assets/static/item-light-2.DXMeG2ml.png",Le="/assets/static/item-medium-1.BwNSGSvm.png",$e="/assets/static/item-medium-2.nAgWU13M.png",Oe="/assets/static/item-medium-3.Dn93sSdr.png",We="/assets/static/item-heavy-1.tIk7i5il.png",Fe="/assets/static/item-heavy-2.DbgSfeRw.png",Ve="/assets/static/item-heavy-3.D7eC-rvm.png",Ge="/assets/static/item-heavy-ranged.BcxSnrB3.png",Je="/assets/static/item-light-ranged.CT8-VrVt.png",qe="/assets/static/item-heavy-armour.CAojx1Gb.png",He="/assets/static/item-light-armour.DGnRvkUt.png",Xe="/assets/static/item-spell-1.7SX1x-Yz.png",Ye="/assets/static/item-spell-2.DbZbdGRz.png",Ke="/assets/static/item-spell-3.pfDGV10y.png",Ze="/assets/static/item-spell-4.CuozkLjt.png",Qe="/assets/static/item-spell-5.D17wiitV.png",et="/assets/static/item-spell-blank.DeKp874k.png",se=[{name:"None",special:"none"},{name:"Custom...",special:"upload"},{special:"divider"},{name:"Torch",url:De},{name:"Lantern",url:Ne},{name:"Electric lantern",url:_e},{name:"Pip purse",url:Ee},{name:"Quiver",url:Ae},{name:"Rations",url:ze},{name:"Stones",url:Re},{special:"divider"},{name:"Branch",url:Be},{name:"Dagger",url:Ue},{name:"Needle",url:Me},{name:"Axe",url:Le},{name:"Sword",url:$e},{name:"Mace",url:Oe},{name:"Warhammer",url:We},{name:"Spear",url:Fe},{name:"Hookarm",url:Ve},{name:"Bow",url:Ge},{name:"Sling",url:Je},{special:"divider"},{name:"Heavy armour",url:qe},{name:"Light armour",url:He},{special:"divider"},{name:"Spell 1",url:Xe},{name:"Spell 2",url:Ye},{name:"Spell 3",url:Ke},{name:"Spell 4",url:Ze},{name:"Spell 5",url:Qe},{name:"Spell (blank)",url:et}],{kebabCase:re}=K,tt=C.div.withConfig({displayName:"CustomItemControlPanel__ControlPanel",componentId:"sc-1y4teib-0"})(["background:#fff;max-width:45rem;margin:0 auto;margin-bottom:5rem;box-shadow:0 1rem 4rem rgba(0,0,0,0.1);"]),nt=C.div.withConfig({displayName:"CustomItemControlPanel__ControlPanelHeader",componentId:"sc-1y4teib-1"})(["padding:1.5rem 1.5rem 1.1rem 1.5rem;border-bottom:1px solid #aaa;"]),ot=C.div.withConfig({displayName:"CustomItemControlPanel__ControlPanelFooter",componentId:"sc-1y4teib-2"})(["display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-top:1px solid #aaa;",""],B.phone`
        display: block;
    `),it=C.div.withConfig({displayName:"CustomItemControlPanel__ControlPanelTools",componentId:"sc-1y4teib-3"})(["display:grid;grid-template-columns:1fr 14rem;min-height:290px;",""],B.phone`
        display: block;
    `),ae=C.div.withConfig({displayName:"CustomItemControlPanel__ControlPanelToolsSection",componentId:"sc-1y4teib-4"})(["padding:1.5rem;"]),st=C(ae).withConfig({displayName:"CustomItemControlPanel__ControlPanelToolsSectionRight",componentId:"sc-1y4teib-5"})(["border-left:1px solid #aaa;",""],B.phone`
        border-top: 1px solid #aaa;
        border-left: 0;
    `),O=C.label.withConfig({displayName:"CustomItemControlPanel__StyledInputContainer",componentId:"sc-1y4teib-6"})(["display:block;margin-bottom:0.5rem;span{display:inline-block;margin-right:0.5rem;min-width:5rem;font-size:1.2rem;}input{display:inline-block;&[type='number']{width:3rem;}&[type='file']{width:11rem;}","}&.wide{span{min-width:10rem;}}"],B.phone`
            font-size: 1rem;
        `),rt=C(O).withConfig({displayName:"CustomItemControlPanel__FooterInputContainer",componentId:"sc-1y4teib-7"})(["margin-right:auto;span{min-width:0;}",""],B.phone`
        margin-bottom: 1rem;
    `),le=C(xe).withConfig({displayName:"CustomItemControlPanel__ControlButton",componentId:"sc-1y4teib-8"})(["margin-left:1rem;",""],B.phone`
        margin-left: 0rem;
        margin-right: 1rem;
    `),at=C(le).withConfig({displayName:"CustomItemControlPanel__ControlButtonSaveSheet",componentId:"sc-1y4teib-9"})(["",""],B.phone`
        display: none;
    `),R=({fieldName:n,title:e,itemState:o,dispatch:t,fieldType:r="text"})=>i.jsxs(O,{className:"wide",children:[i.jsxs("span",{children:[e,":"]}),i.jsx("input",{type:r,value:o[n],onChange:d=>t({type:`set-${re(n)}`,[n]:d.target.value})})]}),H=({fieldName:n,title:e,itemState:o,className:t,dispatch:r})=>i.jsxs(O,{className:t,children:[i.jsxs("span",{children:[e,":"]}),i.jsx("input",{type:"checkbox",checked:o[n],onChange:d=>r({type:`set-${re(n)}`,[n]:!o[n]})})]}),lt=({templateMode:n,itemTemplates:e,selectedTemplate:o,selectedImageMode:t,itemState:r,dispatch:d,setTemplateMode:u,setImageFile:p,handleSaveImageButtonClick:c,handleSaveToSheetButtonClick:w})=>{const{t:m}=ie("item_card_studio",{keyPrefix:"controlPanel"}),I=m("resolutionOptions",{returnObjects:!0});return i.jsxs(tt,{children:[i.jsx(nt,{children:i.jsxs(O,{children:[i.jsxs("span",{children:[m("template"),":"]})," ",i.jsx("select",{value:n,onChange:f=>u(f.target.value),children:e.map(({id:f,name:T})=>i.jsx("option",{value:f,children:T},f))})]})}),i.jsxs(it,{children:[i.jsxs(ae,{children:[o?.controls?.name&&i.jsx(R,{itemState:r,dispatch:d,title:m("name"),fieldName:"name"}),o?.controls?.damage&&i.jsx(R,{itemState:r,dispatch:d,title:m("damageOrDef"),fieldName:"damage"}),o?.controls?.mechanicDetail&&i.jsx(R,{itemState:r,dispatch:d,title:m("mechanic"),fieldName:"mechanicDetail"}),o?.controls?.clearDetail&&i.jsx(R,{itemState:r,dispatch:d,title:m("clear"),fieldName:"clearDetail"}),o?.controls?.classDetail&&i.jsx(R,{itemState:r,dispatch:d,title:m("class"),fieldName:"classDetail"}),o?.controls?.usage&&i.jsx(R,{itemState:r,dispatch:d,title:m("usage"),fieldName:"usage",fieldType:"number"}),o?.controls?.star&&i.jsx(H,{className:"wide",itemState:r,dispatch:d,title:m("star"),fieldName:"star"}),o?.controls?.image&&i.jsxs(O,{className:"wide",children:[i.jsxs("span",{children:[m("image"),":"]})," ",i.jsx("select",{value:r.image,onChange:f=>d({type:"set-image",image:f.target.value}),children:se.map(({name:f,special:T,url:P},a)=>{if(T==="divider")return i.jsx("option",{disabled:!0,children:"──────────"},a);const s=m(`cardImages.${f}`);return i.jsx("option",{value:f,children:s},f)})})]}),o?.controls?.image&&t&&t.special==="upload"&&i.jsxs(O,{children:[i.jsx("span",{}),i.jsx("input",{type:"file",accept:"image/*",onChange:f=>{p(f.target.files?.[0])}})]})]}),i.jsxs(st,{children:[i.jsx(R,{itemState:r,dispatch:d,title:m("width"),fieldName:"width",fieldType:"number"}),i.jsx(R,{itemState:r,dispatch:d,title:m("height"),fieldName:"height",fieldType:"number"}),i.jsx(R,{itemState:r,dispatch:d,title:m("background"),fieldName:"backgroundColor",fieldType:"color"}),i.jsx(R,{itemState:r,dispatch:d,title:m("foreground"),fieldName:"foregroundColor",fieldType:"color"}),i.jsx(H,{itemState:r,dispatch:d,title:m("divider"),fieldName:"divider"}),i.jsx(H,{itemState:r,dispatch:d,title:m("border"),fieldName:"border"})]})]}),i.jsxs(ot,{children:[i.jsxs(rt,{children:[i.jsxs("span",{children:[m("resolution"),":"]}),i.jsx("select",{value:r.resolution,onChange:f=>d({type:"set-resolution",resolution:Number(f.target.value)}),children:I.map(f=>i.jsx("option",{value:f.dpi,children:f.label},f.dpi))})]}),i.jsx(at,{onClick:w,children:m("saveToSheetButton")}),i.jsx(le,{onClick:c,children:m("saveImageButton")})]})]})},dt=(n,e,o,t,r,d)=>{let u=Math.PI/2*3,p=e,c=o;const w=Math.PI/t;n.beginPath(),n.moveTo(e,o-r);for(let m=0;m<t;m++)p=e+Math.cos(u)*r,c=o+Math.sin(u)*r,n.lineTo(p,c),u+=w,p=e+Math.cos(u)*d,c=o+Math.sin(u)*d,n.lineTo(p,c),u+=w;n.lineTo(e,o-r),n.closePath(),n.fill()},ct=(n,e,o,t,r,d)=>{const u=e.split(" ");let p="";for(let c=0;c<u.length;c++){const w=p+u[c]+" ";n.measureText(w).width>r&&c>0?(n.fillText(p,o,t),p=u[c]+" ",t+=d):p=w}n.fillText(p,o,t)},mt="Texturina",F="Open Sans Condensed",ut=(n,e,o)=>{const t=s=>s*(o.resolution/100),r=()=>{const s=t(13);e.font=`${s}px ${mt}`,e.textAlign="left",e.fillStyle=o.foregroundColor;const l=o.star?t(21):t(5);e.fillText(o.name,l,t(16.5),n.width-l-t(6))},d=()=>{e.fillStyle=o.foregroundColor,e.font=`bold ${t(11)}px ${F}`,e.textAlign="right",e.fillText(o.damage,n.width-t(9),t(42)),e.textAlign="left"},u=()=>{e.fillStyle=o.backgroundColor,e.strokeStyle=o.foregroundColor,e.lineWidth=t(2);const l=e.measureText(o.damage).width+t(10),b=t(20),g=t(28),y=n.width-l-t(5);e.beginPath(),e.moveTo(y,g),e.lineTo(y+l,g),e.lineTo(y+l,g+b),e.lineTo(y,g+b),e.lineTo(y,g),e.closePath(),e.stroke(),e.fill()},p=()=>{e.fillStyle=o.foregroundColor,e.strokeStyle=o.backgroundColor,e.lineJoin="round",e.lineWidth=t(3),e.textAlign="left",e.font=`bold ${t(10)}px ${F}`,e.fillText(ue.t("item_card_studio:controlPanel.clear")+":",t(6),n.height-t(19)),e.font=`${t(10)}px ${F}`,e.fillText(o.clearDetail,t(6),n.height-t(8))},c=()=>{e.fillStyle=o.foregroundColor,e.strokeStyle=o.backgroundColor,e.lineJoin="round",e.lineWidth=t(3),e.textAlign="left",e.font=`bold ${t(10)}px ${F}`,e.strokeText(o.classDetail,t(6),n.height-t(8)),e.fillText(o.classDetail,t(6),n.height-t(8))},w=()=>{e.font=`italic ${t(10)}px ${F}`,e.textAlign="left";let s=t(31);(o.damage.length||o.usage)&&(s+=Math.max(o.damage.length?t(25):0,t(Math.ceil(o.usage/3)*16))),o.divider&&(s+=t(6)),ct(e,o.mechanicDetail,t(6),s,n.width-t(12),t(12))},m=()=>{e.fillStyle=o.backgroundColor,e.strokeStyle=o.foregroundColor,e.lineWidth=t(2);for(let s=0;s<o.usage;s++){const l=t(10)+s%3*t(12),b=t(35)+Math.floor(s/3)*t(12);e.beginPath(),e.arc(l,b,t(4.5),0,Math.PI*2,!0),e.closePath(),e.stroke(),e.fill()}},I=()=>{dt(e,t(11),t(12),5,t(7),t(3.2))},f=()=>{e.fillRect(0,t(23),n.width,t(1))},T=()=>{e.fillRect(0,0,n.width,t(1)),e.fillRect(0,0,t(1),n.height),e.fillRect(0,n.height-t(1),n.width,t(1)),e.fillRect(n.width-t(1),0,t(1),n.height)},P=()=>{e.globalCompositeOperation="multiply";const s=o.imageSource,l=t(35),b=t(10),g=n.height-l-b,y=n.width-b*2,_=Math.min(y/s.width,g/s.height),$=y/2-s.width/2*_+b,U=g/2-s.height/2*_+l;e.drawImage(s,$,U,s.width*_,s.height*_),e.globalCompositeOperation="source-over"};return(()=>{console.log("drawing",o),e.fillStyle=o.backgroundColor,e.fillRect(0,0,n.width,n.height),e.fillStyle=o.foregroundColor,e.strokeStyle=o.foregroundColor,e.lineWidth=t(1),o.imageSource&&P(),o.damage.length&&(d(),u(),d()),m(),r(),o.clearDetail.length&&p(),o.mechanicDetail.length&&w(),o.classDetail.length&&c(),o.star&&I(),o.divider&&f(),o.border&&T()})()},Y=(n,e,o)=>{if(!n||!e)return;const t=n.getContext("2d");if(t){ut(n,t,o);const r=n.toDataURL("image/png");e.src=r}},de=n=>{const[e,o]=x.useState();return x.useEffect(()=>{if(!n){o(null);return}const t=new Image;t.src=n,t.addEventListener("load",()=>{o(t)})},[n]),e},ce=C.div.withConfig({displayName:"CustomItemPrintableSheet__PrintableSheet",componentId:"sc-oxbpfx-0"})(["width:210mm;height:297mm;background:white;@media print{height:auto;width:auto;}"]),ht=C.div.withConfig({displayName:"CustomItemPrintableSheet__PrintableSheetContent",componentId:"sc-oxbpfx-1"})(["display:grid;grid-auto-flow:dense;grid-template-columns:repeat(7,1in);grid-template-rows:repeat(10,1in);padding:15mm;@media print{padding:0;}"]),pt=C.div.withConfig({displayName:"CustomItemPrintableSheet__SavedCard",componentId:"sc-oxbpfx-2"})(["position:relative;border:1px dashed black;.remove-button{display:none;position:absolute;top:0;right:0;}",""],({$interactive:n})=>n&&he(["cursor:pointer;transition:0.05s ease-out transform,0.1s ease-out box-shadow;&:hover{z-index:10;transform:scale(2.5);border:0;box-shadow:0 1rem 4rem rgba(0,0,0,0.1),0 0.2rem 1rem rgba(0,0,0,0.2);.remove-button{display:block;}}"])),gt=({itemState:n,restoreSheetItem:e,removeSheetItem:o,interactive:t})=>{const r=x.useRef(null),d=x.useRef(null),u=de(n.imageUrl),{id:p}=n,c=I=>{t&&(I.preventDefault(),I.stopPropagation(),o(p))},w=()=>{t&&e(n)};x.useEffect(()=>{Y(r.current,d.current,{...n,imageSource:u,resolution:300,border:!1})},[u]);const m={gridRowEnd:`span ${n.height}`,gridColumnEnd:`span ${n.width}`};return i.jsxs(pt,{$interactive:t,style:m,onClick:w,children:[i.jsx("button",{className:"remove-button",onClick:c,children:"X"}),i.jsx("canvas",{ref:r,width:n.width*300,height:n.height*300,style:{display:"none"}}),i.jsx("img",{ref:d,style:{width:`${n.width}in`,height:`${n.height}in`}})]})},te=({sheetItems:n,restoreSheetItem:e,removeSheetItem:o,interactive:t})=>i.jsx(ce,{children:i.jsx(ht,{children:n.map(r=>i.jsx(gt,{interactive:t,itemState:r,restoreSheetItem:e,removeSheetItem:o},r.id))})}),{clamp:Z}=K,ne={id:"",name:"New item",resolution:300,usage:3,damage:"",mechanicDetail:"",clearDetail:"",classDetail:"",image:"",star:!1,backgroundColor:"#ffffff",foregroundColor:"#000000",width:1,height:1,divider:!0,border:!0,imageSource:null},ft=Z(1,5),wt=Z(1,2),Ct=Z(0,9),bt=(n,e)=>{switch(console.log("action",e),e.type){case"set-name":return{...n,name:e.name};case"set-damage":return{...n,damage:e.damage};case"set-mechanic-detail":return{...n,mechanicDetail:e.mechanicDetail};case"set-clear-detail":return{...n,clearDetail:e.clearDetail};case"set-class-detail":return{...n,classDetail:e.classDetail};case"set-image":return{...n,image:e.image};case"set-width":return{...n,width:ft(e.width)};case"set-height":return{...n,height:wt(e.height)};case"set-usage":return{...n,usage:Ct(e.usage)};case"set-background-color":return{...n,backgroundColor:e.backgroundColor};case"set-foreground-color":return{...n,foregroundColor:e.foregroundColor};case"set-star":return{...n,star:e.star};case"set-divider":return{...n,divider:e.divider};case"set-border":return{...n,border:e.border};case"set-resolution":return{...n,resolution:e.resolution};case"set-template":return{...n,...e.template};default:return n}};function oe(n,e){const[o,t]=x.useState(()=>{if(typeof window>"u")return e;try{const d=window.localStorage.getItem(n);return d?JSON.parse(d):e}catch{return e}});return[o,d=>{if(!(typeof window>"u"))try{const u=d instanceof Function?d(o):d;t(u),window.localStorage.setItem(n,JSON.stringify(u))}catch(u){console.log(u)}}]}const{lowerCase:yt}=K,vt=C.div.withConfig({displayName:"CustomItemTool__StudioContainer",componentId:"sc-1d8vjuz-0"})(["display:grid;grid-template-columns:2fr minmax(130mm,1fr);padding-left:3rem;padding-right:3rem;"," ",""],B.size("1000px")`
        grid-template-columns: 1fr;
    `,B.phone`
        padding-left: 1rem;
        padding-right: 1rem;
    `),xt=C.div.withConfig({displayName:"CustomItemTool__ItemCreatorContainer",componentId:"sc-1d8vjuz-1"})(["display:block;"]),St=C.div.withConfig({displayName:"CustomItemTool__ItemContainer",componentId:"sc-1d8vjuz-2"})(["display:flex;justify-content:center;align-items:center;padding-bottom:3rem;min-height:300px;img{box-shadow:0 1rem 4rem rgba(0,0,0,0.1),0 0.2rem 1rem rgba(0,0,0,0.2);}"]),It=C.div.withConfig({displayName:"CustomItemTool__PrintableSheetStudioContainer",componentId:"sc-1d8vjuz-3"})(["position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#ddd;> .sheet-area{position:relative;width:","mm;height:","mm;box-shadow:0 1rem 4rem rgba(0,0,0,0.1),0 0.2rem 1rem rgba(0,0,0,0.2);z-index:1;","{position:absolute;top:0;left:0;transform:scale(0.5);transform-origin:0% 0%;}}",""],210/2,297/2,ce,B.size("1000px")`
        display: none;
    `),jt=C.button.withConfig({displayName:"CustomItemTool__PrintableSheetPrintButton",componentId:"sc-1d8vjuz-4"})(["margin-top:2rem;"]),Tt=C.div.withConfig({displayName:"CustomItemTool__PrintableSheetToolsAreaRight",componentId:"sc-1d8vjuz-5"})(["position:absolute;top:1rem;right:1rem;"]),Pt=C.div.withConfig({displayName:"CustomItemTool__PrintableSheetToolsAreaLeft",componentId:"sc-1d8vjuz-6"})(["position:absolute;top:1rem;left:1rem;> button{margin-right:1rem;}"]),kt=C.div.withConfig({displayName:"CustomItemTool__PrintableSheetTitle",componentId:"sc-1d8vjuz-7"})(["position:absolute;top:4.2rem;left:0;right:0;text-align:center;> input{padding:0.4rem;width:50%;border:0;border-radius:0.2rem;",";font-size:1.2rem;text-align:center;letter-spacing:0.05rem;background:#eee;}"],ge.display),X=C.button.withConfig({displayName:"CustomItemTool__PrintableSheetButton",componentId:"sc-1d8vjuz-8"})([""]),Dt=C.div.withConfig({displayName:"CustomItemTool__PrintModeInstructions",componentId:"sc-1d8vjuz-9"})(["position:absolute;top:1rem;right:1rem;width:20rem;padding:1.5rem 1rem;background:#ddd;border:1px dotted black;@media print{display:none;}"]),Nt=n=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.addEventListener("change",o=>{if(!o.target)return;const t=o.target.files;if(!t||t.length===0)return;const r=t[0],d=new FileReader;d.readAsText(r),d.onloadend=u=>{const p=u.target?.result;if(typeof p!="string"){alert("Could not load this file.");return}try{const{name:c,items:w}=JSON.parse(p);if(typeof c!="string")throw new Error("Name is not a string");if(!Array.isArray(w))throw new Error("Not an array");if(!w.every(m=>typeof m=="object"))throw new Error("Not an array of objects");n({name:c,items:w})}catch{alert("Could not load this file.")}}}),e.click()},_t=({bodyPrintMode:n,setBodyPrintMode:e})=>{const{t:o}=ie("item_card_studio"),t=o("itemTemplates",{returnObjects:!0}),r=x.useRef(null),d=x.useRef(null),[u,p]=x.useState(t[0]?.id),[c,w]=x.useState({...ne,...t[0]?.template});x.useEffect(()=>{p(t[0]?.id),w({...ne,...t[0]?.template})},[t[0]?.id]);const m=h=>w(bt(c,h)),[I,f]=x.useState(!1),[T,P]=x.useState(),[a,s]=oe("mausritter.sheet-items",[]),[l,b]=oe("mausritter.sheet-name",""),g=t.find(({id:h})=>h===u),y=se.find(({name:h})=>h===c.image),_=c.resolution===100?100:150,[$,U]=x.useState(null),W=de($);x.useEffect(()=>{if(!T)return U(null);const h=new FileReader;h.readAsDataURL(T),h.onloadend=S=>{const j=S.target?.result;if(typeof j!="string"){alert("Could not load this file.");return}U(j)}},[T]),x.useEffect(()=>{U(y?.url)},[y]);const J=()=>{const h=r.current;if(!h)return;const S=h.toDataURL("img/png"),j=document.createElement("a");j.href=S,j.download=`${yt(c.name)}.png`,j.click()},M=()=>{s([...a,{...c,id:Q(),imageUrl:$}])},E=h=>{s(a.filter(({id:S})=>S!==h))},D=()=>{b(""),s([])},A=()=>{const S="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify({name:l,items:a})),j=`mausritter-items-${l===""?Q(5):l}.json`,z=document.createElement("a");z.setAttribute("href",S),z.setAttribute("download",j),document.body.appendChild(z),z.click(),z.remove()},L=()=>{Nt(({name:h,items:S})=>{s([...a,...S]),l===""&&b(h)})},k=h=>{m({type:"set-template",template:h}),p("freeform"),U(h.imageUrl)};return x.useEffect(()=>{Promise.all([new G("Open Sans Condensed").load(),new G("Open Sans Condensed",{weight:700}).load(),new G("Open Sans Condensed",{style:"italic"}).load(),new G("Texturina",{weight:800}).load()]).then(()=>{f(!0),Y(r.current,d.current,{...c,imageSource:W})})},[]),x.useEffect(()=>{Y(r.current,d.current,{...c,imageSource:W})},[c,W,n]),x.useEffect(()=>{g&&m({type:"set-template",template:g.template})},[g?.id]),n?i.jsxs(i.Fragment,{children:[i.jsx(te,{sheetItems:a,restoreSheetItem:k,removeSheetItem:E,interactive:!1}),i.jsx(Dt,{children:i.jsxs(Ie,{className:"small",children:[i.jsx("h1",{children:o("printSheet.instructionsTitle")}),i.jsx("p",{children:i.jsx(Te,{t:o,i18nKey:"printSheet.instructions",components:{strong:i.jsx("strong",{})}})}),i.jsx("br",{}),i.jsx("p",{children:i.jsx("button",{onClick:()=>e(!1),children:o("printSheet.returnButton")})})]})})]}):i.jsxs(i.Fragment,{children:[i.jsx(Se,{title:`${o("pageTitle")} | Mausritter`}),i.jsx("div",{style:{display:"none"},children:i.jsx("canvas",{ref:r,width:c.width*c.resolution,height:c.height*c.resolution})}),i.jsxs(pe,{children:[i.jsx("br",{}),i.jsx(je,{children:o("title")})]}),i.jsxs(vt,{children:[i.jsxs(xt,{children:[i.jsx(St,{children:i.jsx("img",{ref:d,width:c.width*_,height:c.height*_})}),i.jsx(lt,{templateMode:u,itemTemplates:t,selectedTemplate:g,selectedImageMode:y,itemState:c,dispatch:m,setTemplateMode:p,setImageFile:P,handleSaveImageButtonClick:J,handleSaveToSheetButtonClick:M})]}),i.jsxs(It,{children:[i.jsx("div",{className:"sheet-area",children:i.jsx(te,{interactive:!0,sheetItems:a,restoreSheetItem:k,removeSheetItem:E},`${I}-${a.length}`)}),i.jsx(jt,{onClick:()=>e(!0),children:o("sheet.printSheetButton")}),i.jsxs(Pt,{children:[i.jsx(X,{disabled:a.length===0,onClick:A,children:o("sheet.saveSheetButton")}),i.jsx(X,{onClick:L,children:o("sheet.loadSheetButton",{context:a.length>0&&"hasItems"})})]}),i.jsx(kt,{children:i.jsx("input",{placeholder:o("sheet.sheetNamePlaceholder"),value:l,onChange:h=>b(h.target.value)})}),i.jsx(Tt,{children:i.jsx(X,{onClick:D,children:o("sheet.clearSheetButton")})})]})]})]})},Et=()=>{const[n,e]=x.useState(!1);return i.jsxs(fe,{dark:!n,children:[!n&&i.jsx(we,{showLanguage:!0}),i.jsx(_t,{bodyPrintMode:n,setBodyPrintMode:e})]})},At=Object.freeze(Object.defineProperty({__proto__:null,default:Et},Symbol.toStringTag,{value:"Module"})),Ot={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:ve}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:ye}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:be}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/item-card-studio/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:At}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/item-card-studio/+config.ts",fileExportPathToShowToUser:["default","title"]},valueSerialized:{type:"js-serialized",value:"Item card studio | Mausritter"}},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ce}}};export{Ot as configValuesSerialized};

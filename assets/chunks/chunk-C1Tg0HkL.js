import{g as X,w as H,h as W,k as U,r as x,n as S,p as L,q as I,I as Y}from"./chunk-fZ7Kk4JC.js";var D,F;function Z(){return F||(F=1,D={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),D}var G=Z();const Q=X(G);var K=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function B(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(Q[n[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("-->");return{type:"comment",comment:r!==-1?e.slice(4,r):""}}for(var i=new RegExp(K),a=null;(a=i.exec(e))!==null;)if(a[0].trim())if(a[1]){var c=a[1].trim(),u=[c,""];c.indexOf("=")>-1&&(u=c.split("=")),t.attrs[u[0]]=u[1],i.lastIndex--}else a[2]&&(t.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return t}var ee=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,te=/^\s*$/,ne=Object.create(null);function M(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(n){var r=[];for(var i in n)r.push(i+'="'+n[i]+'"');return r.length?" "+r.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(M,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var re={parse:function(e,t){t||(t={}),t.components||(t.components=ne);var n,r=[],i=[],a=-1,c=!1;if(e.indexOf("<")!==0){var u=e.indexOf("<");r.push({type:"text",content:u===-1?e:e.substring(0,u)})}return e.replace(ee,function(d,b){if(c){if(d!=="</"+n.name+">")return;c=!1}var g,m=d.charAt(1)!=="/",A=d.startsWith("<!--"),h=b+d.length,o=e.charAt(h);if(A){var O=B(d);return a<0?(r.push(O),r):((g=i[a]).children.push(O),r)}if(m&&(a++,(n=B(d)).type==="tag"&&t.components[n.name]&&(n.type="component",c=!0),n.voidElement||c||!o||o==="<"||n.children.push({type:"text",content:e.slice(h,e.indexOf("<",h))}),a===0&&r.push(n),(g=i[a-1])&&g.children.push(n),i[a]=n),(!m||n.voidElement)&&(a>-1&&(n.voidElement||n.name===d.slice(2,-1))&&(a--,n=a===-1?r:i[a]),!c&&o!=="<"&&o)){g=a===-1?r:i[a].children;var l=e.indexOf("<",h),f=e.slice(h,l===-1?void 0:l);te.test(f)&&(f=" "),(l>-1&&a+g.length>=0||f!==" ")&&g.push({type:"text",content:f})}}),r},stringify:function(e){return e.reduce(function(t,n){return t+M("",n)},"")}};const _=(e,t)=>{if(!e)return!1;const n=e.props?.children??e.children;return t?n.length>0:!!n},P=e=>{if(!e)return[];const t=e.props?.children??e.children;return e.props?.i18nIsDynamicList?V(t):t},se=e=>Array.isArray(e)&&e.every(x.isValidElement),V=e=>Array.isArray(e)?e:[e],ae=(e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n},R=(e,t,n,r)=>{if(!e)return"";let i="";const a=V(e),c=t?.transSupportBasicHtmlNodes?t.transKeepBasicHtmlNodesFor??[]:[];return a.forEach((u,d)=>{if(S(u)){i+=`${u}`;return}if(x.isValidElement(u)){const{props:b,type:g}=u,m=Object.keys(b).length,A=c.indexOf(g)>-1,h=b.children;if(!h&&A&&!m){i+=`<${g}/>`;return}if(!h&&(!A||m)||b.i18nIsDynamicList){i+=`<${d}></${d}>`;return}if(A&&m===1&&S(h)){i+=`<${g}>${h}</${g}>`;return}const o=R(h,t,n,r);i+=`<${d}>${o}</${d}>`;return}if(u===null){L(n,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(I(u)){const{format:b,...g}=u,m=Object.keys(g);if(m.length===1){const A=b?`${m[0]}, ${b}`:m[0];i+=`{{${A}}}`;return}L(n,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:u});return}L(n,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:u})}),i},ie=(e,t,n,r,i,a)=>{if(t==="")return[];const c=r.transKeepBasicHtmlNodesFor||[],u=t&&new RegExp(c.map(l=>`<${l}`).join("|")).test(t);if(!e&&!u&&!a)return[t];const d={},b=l=>{V(l).forEach(p=>{S(p)||(_(p)?b(P(p)):I(p)&&!x.isValidElement(p)&&Object.assign(d,p))})};b(e);const g=re.parse(`<0>${t}</0>`),m={...d,...i},A=(l,f,p)=>{const v=P(l),T=o(v,f.children,p);return se(v)&&T.length===0||l.props?.i18nIsDynamicList?v:T},h=(l,f,p,v,T)=>{l.dummy?(l.children=f,p.push(x.cloneElement(l,{key:v},T?void 0:f))):p.push(...x.Children.map([l],y=>{const s={...y.props};return delete s.i18nIsDynamicList,x.createElement(y.type,{...s,key:v,ref:y.ref},T?null:f)}))},o=(l,f,p)=>{const v=V(l);return V(f).reduce((y,s,C)=>{const k=s.children?.[0]?.content&&n.services.interpolator.interpolate(s.children[0].content,m,n.language);if(s.type==="tag"){let N=v[parseInt(s.name,10)];p.length===1&&!N&&(N=p[0][s.name]),N||(N={});const E=Object.keys(s.attrs).length!==0?ae({props:s.attrs},N):N,j=x.isValidElement(E),w=j&&_(s,!0)&&!s.voidElement,z=u&&I(E)&&E.dummy&&!j,J=I(e)&&Object.hasOwnProperty.call(e,s.name);if(S(E)){const $=n.services.interpolator.interpolate(E,m,n.language);y.push($)}else if(_(E)||w){const $=A(E,s,p);h(E,$,y,C)}else if(z){const $=o(v,s.children,p);h(E,$,y,C)}else if(Number.isNaN(parseFloat(s.name)))if(J){const $=A(E,s,p);h(E,$,y,C,s.voidElement)}else if(r.transSupportBasicHtmlNodes&&c.indexOf(s.name)>-1)if(s.voidElement)y.push(x.createElement(s.name,{key:`${s.name}-${C}`}));else{const $=o(v,s.children,p);y.push(x.createElement(s.name,{key:`${s.name}-${C}`},$))}else if(s.voidElement)y.push(`<${s.name} />`);else{const $=o(v,s.children,p);y.push(`<${s.name}>${$}</${s.name}>`)}else if(I(E)&&!j){const $=s.children[0]?k:null;$&&y.push($)}else h(E,k,y,C,s.children.length!==1||!k)}else if(s.type==="text"){const N=r.transWrapTextNodes,E=a?r.unescape(n.services.interpolator.interpolate(s.content,m,n.language)):n.services.interpolator.interpolate(s.content,m,n.language);N?y.push(x.createElement(N,{key:`${s.name}-${C}`},E)):y.push(E)}return y},[])},O=o([{dummy:!0,children:e||[]}],g,V(e||[]));return P(O[0])},q=(e,t,n)=>{const r=e.key||t,i=x.cloneElement(e,{key:r});if(!i.props||!i.props.children||n.indexOf(`${t}/>`)<0&&n.indexOf(`${t} />`)<0)return i;function a(){return x.createElement(x.Fragment,null,i)}return x.createElement(a,{key:r})},oe=(e,t)=>e.map((n,r)=>q(n,r,t)),le=(e,t)=>{const n={};return Object.keys(e).forEach(r=>{Object.assign(n,{[r]:q(e[r],r,t)})}),n},ce=(e,t,n,r)=>e?Array.isArray(e)?oe(e,t):I(e)?le(e,t):(H(n,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null;function ue({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:a={},values:c,defaults:u,components:d,ns:b,i18n:g,t:m,shouldUnescape:A,...h}){const o=g||W();if(!o)return H(o,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),e;const O=m||o.t.bind(o)||(w=>w),l={...U(),...o.options?.react};let f=b||O.ns||o.options?.defaultNS;f=S(f)?[f]:f||["translation"];const p=R(e,l,o,r),v=u||p||l.transEmptyNodeValue||r,{hashTransKey:T}=l,y=r||(T?T(p||v):p||v);o.options?.interpolation?.defaultVariables&&(c=c&&Object.keys(c).length>0?{...c,...o.options.interpolation.defaultVariables}:{...o.options.interpolation.defaultVariables});const s=c||t!==void 0&&!o.options?.interpolation?.alwaysFormat||!e?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},C={...a,context:i||a.context,count:t,...c,...s,defaultValue:v,ns:f},k=y?O(y,C):v,N=ce(d,k,o,r),E=ie(N||e,k,o,l,C,A),j=n??l.defaultTransParent;return j?x.createElement(j,h,E):E}function fe({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:a={},values:c,defaults:u,components:d,ns:b,i18n:g,t:m,shouldUnescape:A,...h}){const{i18n:o,defaultNS:O}=x.useContext(Y)||{},l=g||o||W(),f=m||l?.t.bind(l);return ue({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:a,values:c,defaults:u,components:d,ns:b||f?.ns||O||l?.options?.defaultNS,i18n:l,t:m,shouldUnescape:A,...h})}export{fe as T};
